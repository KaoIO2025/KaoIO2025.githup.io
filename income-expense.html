<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    /* CSS ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
  </style>
</head>
<body>

  <!-- Navbar -->
  <script src="navbar.js"></script>

  <div class="content">
    <h1>üìä ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h1>

    <!-- ‡∏õ‡∏∏‡πà‡∏° Dark Mode Toggle -->
    <button id="darkModeToggle" style="position: fixed; top: 20px; right: 20px; background: none; border: none; font-size: 20px;">üåô Dark Mode</button>

    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <form id="entryForm">
      <input type="date" id="date" required>
      <input type="text" id="description" placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" required>
      <input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)" required>
      <select id="type" required>
        <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
        <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
      </select>
      <button type="submit">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </form>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <table id="dataTable">
      <thead>
        <tr>
          <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
          <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
          <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
          <th>‡∏•‡∏ö</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

  </div>

  <script>
    // JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Table ‡πÅ‡∏•‡∏∞ LocalStorage
    let entries = JSON.parse(localStorage.getItem('entries')) || [];

    function renderTable() {
      const tbody = document.querySelector('#dataTable tbody');
      tbody.innerHTML = '';
      entries.forEach((entry, index) => {
        const row = `
          <tr>
            <td>${entry.date}</td>
            <td>${entry.description}</td>
            <td>${entry.amount.toLocaleString()} ‡∏ø</td>
            <td style="color:${entry.type === 'income' ? 'limegreen' : 'orangered'};">
              ${entry.type === 'income' ? '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö' : '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢'}
            </td>
            <td><button class="delete-btn" onclick="deleteEntry(${index})">‡∏•‡∏ö</button></td>
          </tr>
        `;
        tbody.innerHTML += row;
      });
    }

    document.getElementById('entryForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const newEntry = {
        date: document.getElementById('date').value,
        description: document.getElementById('description').value,
        amount: Number(document.getElementById('amount').value),
        type: document.getElementById('type').value
      };
      entries.push(newEntry);
      localStorage.setItem('entries', JSON.stringify(entries));
      renderTable();
      this.reset();
    });

    function deleteEntry(index) {
      if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?')) {
        entries.splice(index, 1);
        localStorage.setItem('entries', JSON.stringify(entries));
        renderTable();
      }
    }

    renderTable();

    // Toggle Dark Mode
    const darkModeToggle = document.getElementById('darkModeToggle');

    darkModeToggle.addEventListener('click', function() {
      document.body.classList.toggle('dark');
      const darkModeStatus = document.body.classList.contains('dark');
      localStorage.setItem('darkMode', darkModeStatus);
    });

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Dark Mode ‡∏à‡∏≤‡∏Å LocalStorage
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark');
    }
  </script>

</body>
</html>

