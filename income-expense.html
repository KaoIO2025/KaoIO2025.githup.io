<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>à¸£à¸²à¸¢à¸£à¸±à¸š-à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢</title>
  <link rel="stylesheet" href="style.css">
  <script src="navbar.js"></script>
</head>
<body>
  <div class="container">
    <h1>ðŸ“‹ à¸£à¸²à¸¢à¸£à¸±à¸š-à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢</h1>
    <form id="form">
      <input type="date" id="date" required>
      <input type="text" id="desc" placeholder="à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”" required>
      <input type="number" id="amount" placeholder="à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™" required>
      <select id="type">
        <option value="income">à¸£à¸²à¸¢à¸£à¸±à¸š</option>
        <option value="expense">à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢</option>
      </select>
      <button type="submit">âž• à¹€à¸žà¸´à¹ˆà¸¡</button>
    </form>

    <table id="table">
      <thead>
        <tr>
          <th>à¸§à¸±à¸™à¸—à¸µà¹ˆ</th>
          <th>à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”</th>
          <th>à¸ˆà¸³à¸™à¸§à¸™</th>
          <th>à¸›à¸£à¸°à¹€à¸ à¸—</th>
          <th>à¸¥à¸š</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let data = JSON.parse(localStorage.getItem('data')) || [];

    function render() {
      let tbody = document.querySelector('#table tbody');
      tbody.innerHTML = '';
      data.forEach((d, i) => {
        tbody.innerHTML += `
          <tr>
            <td>${d.date}</td>
            <td>${d.desc}</td>
            <td>${d.amount} à¸¿</td>
            <td style="color:${d.type==='income'?'limegreen':'orangered'}">
              ${d.type==='income'?'à¸£à¸²à¸¢à¸£à¸±à¸š':'à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢'}
            </td>
            <td><button onclick="del(${i})">à¸¥à¸š</button></td>
          </tr>`;
      });
    }

    render();

    document.getElementById('form').onsubmit = e => {
      e.preventDefault();
      data.push({
        date: date.value,
        desc: desc.value,
        amount: Number(amount.value),
        type: type.value
      });
      localStorage.setItem('data', JSON.stringify(data));
      render();
      e.target.reset();
    };

    function del(i) {
      if(confirm('à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸µà¹‰?')) {
        data.splice(i,1);
        localStorage.setItem('data', JSON.stringify(data));
        render();
      }
    }
  </script>
</body>
</html>
