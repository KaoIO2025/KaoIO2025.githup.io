<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>
  <link rel="stylesheet" href="style.css">
  <script src="navbar.js"></script>
</head>
<body>
  <div class="container">
    <h1>üí∞ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h1>
    <form id="form">
      <input type="date" id="date" required>
      <input type="text" id="desc" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" required>
      <input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" required>
      <select id="type">
        <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
        <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
      </select>
      <button type="submit">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
    </form>

    <table id="table">
      <thead>
        <tr>
          <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
          <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
          <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
          <th>‡∏•‡∏ö</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let data = JSON.parse(localStorage.getItem('data')) || [];

    function render() {
      let tbody = document.querySelector('#table tbody');
      tbody.innerHTML = '';
      data.forEach((d, i) => {
        tbody.innerHTML += `
          <tr>
            <td>${d.date}</td>
            <td>${d.desc}</td>
            <td>${d.amount} ‡∏ø</td>
            <td style="color:${d.type==='income'?'limegreen':'orangered'}">
              ${d.type==='income'?'‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö':'‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢'}
            </td>
            <td><button onclick="del(${i})">‡∏•‡∏ö</button></td>
          </tr>`;
      });
    }

    render();

    document.getElementById('form').onsubmit = e => {
      e.preventDefault();
      data.push({
        date: date.value,
        desc: desc.value,
        amount: Number(amount.value),
        type: type.value
      });
      localStorage.setItem('data', JSON.stringify(data));
      render();
      e.target.reset();
    };

    function del(i) {
      if(confirm('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ?')) {
        data.splice(i,1);
        localStorage.setItem('data', JSON.stringify(data));
        render();
      }
    }
  </script>
</body>
</html>
